# ToolBridge XMCP Configuration
# Copy this file to .env and update for your environment
#
# For deployment platforms (Fly.io, etc.), set these as environment variables.

# =============================================================================
# Required Settings
# =============================================================================

# Public URL of this MCP server (used for OAuth callbacks and resource URIs)
# This should be the root URL - MCP endpoints are exposed at this base
TOOLBRIDGE_PUBLIC_BASE_URL=https://toolbridge-mcp-staging.fly.dev

# Go backend API base URL
# The API that this MCP server calls for notes, tasks, etc.
TOOLBRIDGE_GO_API_BASE_URL=https://toolbridgeapi.erauner.dev

# =============================================================================
# WorkOS AuthKit Configuration (Required for OAuth)
# =============================================================================

# AuthKit domain from WorkOS dashboard
# Format: https://{your-app}.authkit.app
TOOLBRIDGE_AUTHKIT_DOMAIN=https://svelte-monolith-27-staging.authkit.app

# Backend API audience for token exchange
# Should match the JWT_AUDIENCE configured in the Go backend
TOOLBRIDGE_BACKEND_API_AUDIENCE=https://toolbridgeapi.erauner.dev

# =============================================================================
# Auth Mode Configuration (Optional - defaults shown)
# =============================================================================

# Token auth mode:
# - "exchange" (default): Use backend /auth/token-exchange endpoint (recommended)
# - "passthrough": Call Go API with AuthKit token directly
# TOOLBRIDGE_AUTH_MODE=exchange

# Tenant resolution mode:
# - "backend" (default): Call /v1/auth/tenant endpoint (recommended)
# - "claim": Read tenant_id from token claim
# - "static": Use TOOLBRIDGE_TENANT_ID value
# TOOLBRIDGE_TENANT_MODE=backend

# Static tenant ID (only used when TOOLBRIDGE_TENANT_MODE=static)
# For smoke testing only - NOT for production
# TOOLBRIDGE_TENANT_ID=staging-tenant-001

# JWT signing key for local token issuance (optional fallback)
# Only needed if backend /auth/token-exchange is unavailable
# Generate with: openssl genrsa -out private_key.pem 2048
# TOOLBRIDGE_JWT_SIGNING_KEY=$(cat private_key.pem)

# =============================================================================
# Server Configuration (Optional - defaults shown)
# =============================================================================

# Server bind host
# TOOLBRIDGE_HOST=0.0.0.0

# Server port
# TOOLBRIDGE_PORT=8080

# Log level: debug, info, warn, error
# TOOLBRIDGE_LOG_LEVEL=info

# =============================================================================
# UI Configuration (Optional - defaults shown)
# =============================================================================

# MIME type for MCP-UI HTML resources
# - "text/html" (default): Standard HTML
# - "text/html+skybridge": For ChatGPT Apps SDK
# TOOLBRIDGE_UI_HTML_MIME_TYPE=text/html

# How outputTemplate URIs are generated
# - "http" (default): HTTP URLs like https://api.toolbridge.io/apps/templates/...
# - "resource": MCP resource URIs like ui://toolbridge/apps/...
# TOOLBRIDGE_APPS_OUTPUT_TEMPLATE_MODE=http
